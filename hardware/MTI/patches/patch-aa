diff -bur ./src/MTComm.cpp ../../patched/MTI-0.5/src/MTComm.cpp
--- ./src/MTComm.cpp	2011-12-21 06:31:29.000000000 -0800
+++ ../../patched/MTI-0.5/src/MTComm.cpp	2012-03-29 16:06:01.000000000 -0700
@@ -2760,7 +2760,11 @@
       perror("gettimeofday");
     } 
   	
+#ifdef __APPLE__
+  printf("%ld %d ", timev.tv_sec, timev.tv_usec);
+#else
   printf("%ld %ld ", timev.tv_sec, timev.tv_usec);
+#endif
 }	
 
 
diff -bur ./src/MTI.cpp ../../patched/MTI-0.5/src/MTI.cpp
--- ./src/MTI.cpp	2011-12-21 06:31:29.000000000 -0800
+++ ../../patched/MTI-0.5/src/MTI.cpp	2012-03-29 16:05:42.000000000 -0700
@@ -16,12 +16,27 @@
 #include <string>
 #include <sstream>
 
+#ifdef __APPLE__
+#include <mach/clock.h>
+#include <mach/mach.h>
+#endif
+
 static double getHorodatage()
 {
 	struct timespec ts;
 	std::ostringstream oss;
 
+#ifdef __APPLE__ // OS X does not have clock_gettime, use clock_get_time
+	clock_serv_t cclock;
+	mach_timespec_t mts;
+	host_get_clock_service(mach_host_self(), CALENDAR_CLOCK, &cclock);
+	clock_get_time(cclock, &mts);
+	mach_port_deallocate(mach_task_self(), cclock);
+	ts.tv_sec = mts.tv_sec;
+	ts.tv_nsec = mts.tv_nsec;
+#else
 	clock_gettime(CLOCK_REALTIME,&ts);
+#endif
 
 	return ts.tv_sec + ts.tv_nsec*1e-9;
 }
diff -bur ./test/Makefile.in ../../patched/MTI-0.5/test/Makefile.in
--- ./test/Makefile.in	2011-12-21 06:31:29.000000000 -0800
+++ ../../patched/MTI-0.5/test/Makefile.in	2012-03-30 10:52:54.000000000 -0700
@@ -36,6 +36,14 @@
 
 CPPFLAGS+=	-I${top_srcdir} 
 
+UNAME := $(shell uname)
+ifeq ($(UNAME), Linux)
+	LIBS= -lMTI -lrt
+endif
+ifeq ($(UNAME), Darwin)
+	LIBS= -lMTI
+endif
+
 ifeq (${CC},gcc)
 CFLAGS+= 	-Wall
 endif
@@ -53,7 +61,7 @@
 
 $(PROG): $(OBJS)
 	$(LIBTOOL) --mode=link $(CXX) $(LDFLAGS) -o $@ $(OBJS) \
-	-rpath $(LIBDIR) -L../src -lMTI -lrt
+	-rpath $(LIBDIR) -L../src $(LIBS)
 
 %.lo: %.cpp
 	$(LIBTOOL) --mode=compile $(CXX) -c $(CPPFLAGS) $(CFLAGS) $<
